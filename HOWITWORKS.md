# –†–µ–≤–µ—Ä—Å-–∏–Ω–∂–µ–Ω–µ—Ä–∏–º API –ê–°–£ –†–°–û

## –¢–∞–±–ª–∏—Ü–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

-   [–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç](#–≤—Ö–æ–¥-–≤-–∞–∫–∫–∞—É–Ω—Ç)
-   [–ó–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä—É](#–∑–∞–ø—Ä–æ—Å—ã-–∫-—Å–µ—Ä–≤–µ—Ä—É)
-   [ID —Ä–∞–∑–Ω—ã—Ö –≤–µ—â–µ–π](#id-—Ä–∞–∑–Ω—ã—Ö-–≤–µ—â–µ–π)
-   [–ü–æ—á—Ç–∞](#–ø–æ—á—Ç–∞)
-   [–î—Ä—É–≥–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ—Å—Ç–∏](#–¥—Ä—É–≥–∏–µ-–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ—Å—Ç–∏)

–ó–¥–µ—Å—å –æ–ø–∏—Å–∞–Ω—ã –º–æ–∏ –∑–∞–º–µ—Ç–∫–∏ –æ —Ç–æ–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Ö –∞–ø–∏. –û—á–µ–Ω—å –Ω–∞–¥–µ—é—Å—å, –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–µ —É–≤–∏–¥–∏—Ç —ç—Ç—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏ –Ω–µ –ø–æ–º–µ–Ω—è–µ—Ç –Ω–∏—á–µ–≥–æ :)

**‚ö†Ô∏è –í–ê–ñ–ù–û! –≠—Ç–æ –Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞, –µ—Å–ª–∏ –≤—ã –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É [README.md](README.md)‚ö†Ô∏è**

## –í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –≤—Å–µ–≥–æ –Ω–∞ –¥–≤—É—Ö –∫–ª—é—á–∞—Ö: –∫—É–∫–∏ ESRNSec –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ at. –û–±–∞ –ø–æ–ª—É—á–∞—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è. –õ–µ–∑—Ç—å –≤ –≥–æ—Å—É—Å–ª—É–≥–∏ —è –Ω–µ —Ö–æ—á—É –∏ –Ω–µ –±—É–¥—É, –º–æ–∂–µ—Ç –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —É–µ–¥—É –∏–∑ –†–æ—Å—Å–∏–∏ –ø–æ–ø—Ä–æ–±—É—é –æ–ø–∏—Å–∞—Ç—å –∏—Ö –∞–ø–∏.

–î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ:

1.  –°–¥–µ–ª–∞—Ç—å POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `https://asurso.ru/webapi/auth/getdata`

–ú—ã –ø–æ–ª—É—á–∏–º –æ—Ç–≤–µ—Ç –≤ JSON –∏ –∫—É–∫–∏ `NSSESSIONID`

```
{
  "lt": "—á–∏—Å–ª–æ 1*",
  "ver": "—á–∏—Å–ª–æ 2*",
  "salt": "—á–∏—Å–ª–æ 3*"
}
```

2.  –°–¥–µ–ª–∞—Ç—å POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `https://asurso.ru/webapi/login` —Å –∫—É–∫–∏ `NSSESSIONID` –∏ —Ç–µ–ª–æ–º –≤ x-www-form-urlencoded –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```
  LoginType: 1
  cid: [id —Å—Ç—Ä–∞–Ω—ã, –≤—Å–µ–≥–¥–∞ 2]
  sid: [id —Ä–µ–≥–∏–æ–Ω–∞]
  pid: [id –æ–∫—Ä—É–≥–∞/—Ä–∞–π–æ–Ω–∞]
  cn: [id –≥–æ—Ä–æ–¥–∞]
  sft: [id –¢–ò–ü–ê –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏]
  scid: [id –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏]
  UN: [–ª–æ–≥–∏–Ω, —Å—Ç—Ä–æ–∫–∞]
  PW: [–ø–µ—Ä–≤—ã–µ 9 —Å–∏–º–≤–æ–ª–æ–≤ —Ö–µ—à–∞ –ø–∞—Ä–æ–ª—è]
  lt: [—á–∏—Å–ª–æ 1*]
  pw2: [–ø–æ–ª–Ω—ã–π —Ö–µ—à –ø–∞—Ä–æ–ª—è]
  ver: [—á–∏—Å–ª–æ 2*]
```

**–í—Å–µ ID –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –≤ —Ñ–∞–π–ª–µ [LOGINIDS.md](LOGINIDS.md)**

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π PW –∏ pw2 –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∑—è—Ç—å –≤–∞—à –ø–∞—Ä–æ–ª—å, —Ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Å MD5, –∞ –∑–∞—Ç–µ–º –≤–Ω–∞—á–∞–ª–µ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –∫ –Ω–µ–º—É –ø–æ–ª—É—á–µ–Ω–Ω—É—é –≤ 1 —à–∞–≥–µ —Å–æ–ª—å (—á–∏—Å–ª–æ 3\*) –∏ —Å–Ω–æ–≤–∞ —Ö–µ—à–∏—Ä–æ–≤–∞—Ç—å. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–ª–≥–æ—Ä–∏—Ç–º –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

`pw2 = md5((—á–∏—Å–ª–æ 3*) + md5(password))`

–ó–∞—á–µ–º —Ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –¥–∞ –µ—â–µ –∏ —Å MD5 –ª—É—á—à–µ —Å–ø—Ä–æ—Å–∏—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ tls –∏ –∞—Å—É—Ä—Å–æ)

3.  –í –æ—Ç–≤–µ—Ç –º—ã –ø–æ–ª—É—á–∏–º JSON —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞:

```
{
  "at": "[—á–∏—Å–ª–æ at]",
  "code": null,
  "timeOut": 3600000,
  "accessToken": "...",
  "refreshToken": "...",
  "accountInfo": {
    "activeToken": null,
    "secureActiveToken": "...",
    "currentOrganization": {
      "id": ...,
      "name": "..."
    },
    "user": {
      "id": ...,
      "name": "..."
    },
    "userRoles": [],
    "organizations": [
      {
        "id": ...,
        "name": "..."
      },
      {
        "id": ...,
        "name": "..."
      }
    ],
    "loginTime": "2022-01-13T22:37:38.7883797",
    "active": true,
    "canLogin": true,
    "storeTokens": true,
    "accessToken": "..."
  },
  "tokenType": "Bearer",
  "entryPoint": "/asp/SecurityWarning.asp",
  "requestData": {
    "warnType": "1"
  },
  "errorMessage": null
}
```

–û—Ç—Å—é–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –ª–∏—à—å —á–∏—Å–ª–æ at, –µ–≥–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –≤–µ–¥—å –±–µ–∑ –Ω–µ–≥–æ –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å –Ω–∏ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å. –ë–æ–ª–µ–µ —Ç–æ–≥–æ, –æ–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –≤–µ–¥—å –∫–æ–≥–¥–∞ –≤—ã –≤—Ö–æ–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É —ç—Ç–æ —á–∏—Å–ª–æ –±—É–¥–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å –≤–∞–º–∏, –∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤—ã –¥–µ–ª–∞–µ—Ç–µ –Ω–µ GET –∞ POST –∑–∞–ø—Ä–æ—Å. –ú–Ω–µ —Ç–∞–∫–∞—è –ª–æ–≥–∏–∫–∞ –∫–∞–∂–µ—Ç—Å—è –æ—á–µ–Ω—å —Å—Ç—Ä–∞–Ω–Ω–æ–π, –≤–µ–¥—å –µ—Å–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É, —á–∏—Å–ª–æ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è –∏–∑-–∑–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –Ω–æ –Ω–µ –Ω–∞ –±–µ–∫–µ–Ω–¥–µ.

–ö–æ—Ä–æ—á–µ, –∑–∞–±–∏—Ä–∞–π—Ç–µ "at" –∏ –∏–¥–µ–º –¥–∞–ª—å—à–µ.

**–ö—É–∫–∏ ESRNSec —Å—Ç–∞–≤–∏—Ç—Å—è —Å–∞–º–∏–º –∑–∞–ø—Ä–æ—Å–æ–º (–∑–∞–≥–æ–ª–æ–≤–æ–∫ set-cookie). –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ, –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ.**

## –ó–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä—É

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã, –∫—Ä–æ–º–µ —Ç–µ—Ö, —á—Ç–æ –¥–ª—è –≤—Ö–æ–¥–∞, –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤ —Å–µ–±–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ at —Å –∫–ª—é—á–æ–º. –î–ª—è –≤—Ö–æ–¥–∞ —Ç–∞–∫–∂–µ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å referrer: <https://asurso.ru/about.html>

–í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å studentID, –≤ –±—Ä–∞—É–∑–µ—Ä–µ –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø—Ä–∏ GET –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ <https://asurso.ru/webapi/student/diary/init> –í –º–∞—Å—Å–∏–≤–µ students –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –∏ —Ç–∞–º —É–∂–µ –Ω–∞—Ö–æ–¥–∏–º –ø–æ–ª–µ studentId.

–ï—Å–ª–∏ –≤—ã –ø–æ—Ö–æ–¥–∏—Ç–µ –ø–æ —Å–∞–π—Ç—É —Ç–æ —É–≤–∏–¥–∏—Ç–µ —á—Ç–æ –∏–Ω–æ–≥–¥–∞ –¥–µ–ª–∞—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã html —Ç–µ–º–ø–ª–µ–π—Ç–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä pastmandatory.component –∏ diaryday.component, –Ω–µ –∑–Ω–∞—é –∑–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ. –≠—Ç–æ —á—Ç–æ-—Ç–æ –Ω–∞ –∞–Ω–≥—É–ª—è—Ä—Å–∫–æ–º üò¨

## ID —Ä–∞–∑–Ω—ã—Ö –≤–µ—â–µ–π

–í –æ—Å–Ω–æ–≤–Ω–æ–º —è —Å–æ–±–∏—Ä–∞–ª –∏—Ö —á–µ—Ä–µ–∑ –∑–Ω–∞—á–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ select, –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—à–ª–æ—Å—å –ø–∞—Ä—Å–∏—Ç—å.

## –ü–æ—á—Ç–∞

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª —è –≤—Å–∫–æ—Ä–µ –∑–∞–ø–æ–ª–Ω—é, –∫–æ–≥–¥–∞ –ø–æ–π–º—É –∫–∞–∫ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ø–æ—á—Ç–µ.

## –î—Ä—É–≥–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ—Å—Ç–∏

-   ![image](https://user-images.githubusercontent.com/59040542/149437135-172a14fe-b64c-49ad-9345-9e742a3dc7ac.png) \\
    ESRNSec —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ ID —Å–µ—Å—Å–∏–π aspnet, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–º &. –¢–æ –µ—Å—Ç—å, –ø–µ—Ä–µ—Ö–æ–¥—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º, –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –Ω–æ–≤—ã–µ ID –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫—É–∫–∏, –Ω–µ –∑–Ω–∞—é –∑–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ. –≠—Ç–æ —á—Ç–æ-—Ç–æ –Ω–∞ –∞—Å–ø–æ–≤—Å–∫–æ–º üò¨

-   GET-–ó–∞–ø—Ä–æ—Å –Ω–∞ <https://asurso.ru/webapi/grade/assignment/types?all=false> –¥–∞–µ—Ç –Ω–∞–º —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä –Ω–∞ —Å–∞–π—Ç–µ

-   GET-–ó–∞–ø—Ä–æ—Å –Ω–∞ <https://asurso.ru/webapi/educcertificates/student/[id>] –¥–∞–µ—Ç –Ω–∞–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –Ω–æ –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ: –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ª–æ–∂–Ω—ã–π ESRNSec. –ê –µ—Å–ª–∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π studentID, —Ç–æ –ø–æ–ª—É—á–∏–º —Ç–∞–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: `–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ.`, –Ω–µ –∑–Ω–∞—é –ø—Ä–∏ —á–µ–º —Ç—É—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç. –≠—Ç–æ —á—Ç–æ-—Ç–æ –Ω–∞ –∞—Å—É—Ä—Å–æ–≤—Å–æ–º üò¨ –ê –µ—Å–ª–∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π, —Ç–æ –ª–∏—á–Ω–æ —è –ø–æ–ª—É—á–∞—é null (–∫—Ä–æ–º–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ studentID)

-   –†–∞–∑–Ω—ã–µ –≤–∞—à–∏ —Å–µ—Å—Å–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ —Ä–∞–∑–Ω—ã–µ –ª—é–¥–∏ –≤ —Å–ø–∏—Å–∫–µ –æ–Ω–ª–∞–π–Ω–∞
